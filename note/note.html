<!--
Simple Notes App (single-file)
Instructions:
1. Copy this file into a new file named `notes-app.html` (or open it directly in the browser).
2. The app stores notes in your browser (localStorage). No server required.
3. Features: create, edit, delete, search, tag filtering, export/import JSON, autosave, keyboard shortcuts (Ctrl/Cmd+S to save, Ctrl/Cmd+N new note).

If you want extra features (Markdown preview, sync to Google Drive/Dropbox, user accounts, encryption), tell me and I can extend it.
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Notes App — Single File</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--accent:#60a5fa;--success:#34d399}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#071022 0%, #081426 100%);color:#e6eef6}
    .app{display:grid;grid-template-columns:320px 1fr;gap:18px;height:100vh;padding:18px}
    .panel{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .sidebar{display:flex;flex-direction:column}
    .brand{display:flex;align-items:center;gap:10px;margin-bottom:8px}
    .logo{width:42px;height:42px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#7c3aed);display:flex;align-items:center;justify-content:center;font-weight:700}
    .top-controls{display:flex;gap:8px;align-items:center}
    input[type=text],textarea,select{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px;border-radius:8px;color:inherit;width:100%}
    input[type=text]::placeholder{color:var(--muted)}
    .search{margin-bottom:10px}
    .notes-list{overflow:auto;flex:1;padding-right:6px}
    .note-item{padding:10px;border-radius:8px;margin-bottom:8px;cursor:pointer}
    .note-item:hover{background:rgba(255,255,255,0.02)}
    .note-item.active{background:linear-gradient(90deg, rgba(96,165,250,0.12), rgba(124,58,237,0.06));border:1px solid rgba(96,165,250,0.12)}
    .meta{display:flex;justify-content:space-between;gap:10px;align-items:center}
    .title{font-weight:600}
    .muted{color:var(--muted);font-size:13px}
    .editor{display:flex;flex-direction:column;height:100%}
    .editor-header{display:flex;gap:8px;align-items:center;margin-bottom:8px}
    .editor-body{display:flex;gap:12px;height:calc(100vh - 160px)}
    .left-edit{width:65%;display:flex;flex-direction:column}
    .right-edit{width:35%;display:flex;flex-direction:column;gap:8px}
    textarea{height:100%;resize:none;padding:12px;font-size:15px;line-height:1.5}
    .small{font-size:13px}
    .row{display:flex;gap:8px}
    .btn{background:linear-gradient(90deg,#0e1724,#081426);border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;cursor:pointer}
    .btn.primary{background:linear-gradient(90deg,var(--accent),#7c3aed);color:#021027;border:none}
    .btn.danger{background:linear-gradient(90deg,#ef4444,#f97316);color:#fff}
    .tags{display:flex;gap:6px;flex-wrap:wrap}
    .tag{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:999px;font-size:12px}
    .footer{display:flex;justify-content:space-between;align-items:center;padding-top:8px;color:var(--muted)}
    .empty{opacity:0.6;padding:18px;border-radius:8px;text-align:center}
    @media (max-width:900px){.app{grid-template-columns:1fr;grid-auto-rows:minmax(200px,auto)}.left-edit{width:100%}.right-edit{width:100%;height:240px}}
  </style>
</head>
<body>
  <div class="app">
    <aside class="panel sidebar">
      <div class="brand">
        <div class="logo">N</div>
        <div>
          <div style="font-weight:700">Notes</div>
          <div class="muted small">Local & private</div>
        </div>
      </div>

      <div class="search">
        <input id="searchInput" type="text" placeholder="Search notes or tags..." />
      </div>

      <div style="display:flex;gap:8px;margin-bottom:10px">
        <button id="newBtn" class="btn">+ New</button>
        <button id="exportBtn" class="btn">Export</button>
        <label class="btn" style="display:inline-block;cursor:pointer">
          Import
          <input id="importFile" type="file" accept="application/json" style="display:none" />
        </label>
      </div>

      <div class="notes-list" id="notesList">
        <!-- notes rendered here -->
      </div>

      <div class="footer">
        <div class="muted">Autosave on — Ctrl/Cmd+S to save</div>
        <div class="muted">Notes: <span id="count">0</span></div>
      </div>
    </aside>

    <main class="panel editor">
      <div class="editor-header">
        <div style="flex:1">
          <input id="titleInput" type="text" placeholder="Note title" />
        </div>
        <div class="row">
          <button id="saveBtn" class="btn primary">Save</button>
          <button id="deleteBtn" class="btn danger">Delete</button>
        </div>
      </div>

      <div class="editor-body">
        <div class="left-edit">
          <textarea id="bodyInput" placeholder="Write your note here..."></textarea>
        </div>
        <div class="right-edit">
          <div>
            <div class="small muted">Tags (comma-separated)</div>
            <input id="tagsInput" type="text" placeholder="ideas, todo, work" />
            <div class="tags" id="tagsList" style="margin-top:8px"></div>
          </div>

          <div>
            <div class="small muted">Meta</div>
            <div style="margin-top:8px" id="metaBox">No note selected</div>
          </div>

          <div style="margin-top:auto;display:flex;gap:8px">
            <button id="clearAllBtn" class="btn">Clear all</button>
            <button id="downloadNoteBtn" class="btn">Download JSON</button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    const STORAGE_KEY = 'singlefile_notes_v1';
    let notes = [];
    let currentId = null;
    const $ = id => document.getElementById(id);

    // elements
    const notesListEl = $('notesList');
    const titleInput = $('titleInput');
    const bodyInput = $('bodyInput');
    const tagsInput = $('tagsInput');
    const tagsList = $('tagsList');
    const metaBox = $('metaBox');
    const countEl = $('count');

    // init
    function load() {
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        notes = raw ? JSON.parse(raw) : [];
      } catch(e){ notes = []; }
      if(!Array.isArray(notes)) notes = [];
      renderList();
    }

    function saveAll() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(notes));
      renderList();
    }

    function newNote() {
      const n = { id: genId(), title: 'Untitled', body: '', tags: [], created: Date.now(), updated: Date.now() };
      notes.unshift(n);
      currentId = n.id;
      saveAll();
      selectNote(currentId);
    }

    function genId(){ return 'n_' + Date.now().toString(36) + '_' + Math.floor(Math.random()*1e6).toString(36); }

    function renderList(filter=''){
      notesListEl.innerHTML = '';
      const q = filter.trim().toLowerCase();
      const filtered = notes.filter(n => {
        if(!q) return true;
        return (n.title||'').toLowerCase().includes(q) || (n.body||'').toLowerCase().includes(q) || (n.tags||[]).join(' ').toLowerCase().includes(q);
      });
      filtered.forEach(n => {
        const item = document.createElement('div');
        item.className = 'note-item' + (n.id===currentId ? ' active' : '');
        item.innerHTML = `<div class="meta"><div><div class="title">${escapeHtml(n.title||'Untitled')}</div><div class="muted small">${(n.body||'').slice(0,120).replace(/\n/g,' ')}${(n.body||'').length>120?'…':''}</div></div><div class="muted small">${formatDate(n.updated)}</div></div>`;
        item.onclick = () => { currentId = n.id; selectNote(n.id); };
        notesListEl.appendChild(item);
      });
      countEl.textContent = notes.length;
      if(filtered.length===0){ notesListEl.innerHTML = '<div class="empty">No notes found — create one with the New button.</div>' }
    }

    function selectNote(id){
      const n = notes.find(x => x.id === id);
      if(!n){ clearEditor(); return; }
      currentId = n.id;
      titleInput.value = n.title;
      bodyInput.value = n.body;
      tagsInput.value = (n.tags||[]).join(', ');
      renderTags(n.tags||[]);
      metaBox.innerHTML = `Created: ${formatDate(n.created)}<br>Updated: ${formatDate(n.updated)}`;
      renderList($('searchInput').value);
    }

    function clearEditor(){
      currentId = null;
      titleInput.value = '';
      bodyInput.value = '';
      tagsInput.value = '';
      tagsList.innerHTML = '';
      metaBox.innerHTML = 'No note selected';
      renderList($('searchInput').value);
    }

    function saveCurrent(){
      if(!currentId){ newNote(); return; }
      const n = notes.find(x => x.id === currentId);
      if(!n) return;
      n.title = titleInput.value || 'Untitled';
      n.body = bodyInput.value || '';
      n.tags = parseTags(tagsInput.value);
      n.updated = Date.now();
      saveAll();
      selectNote(n.id);
    }

    function deleteCurrent(){
      if(!currentId) return;
      const idx = notes.findIndex(x=>x.id===currentId);
      if(idx===-1) return;
      if(!confirm('Delete this note? This action cannot be undone.')) return;
      notes.splice(idx,1);
      currentId = null;
      saveAll();
      clearEditor();
    }

    function parseTags(s){ return s.split(',').map(t=>t.trim()).filter(Boolean); }
    function renderTags(tags){ tagsList.innerHTML=''; (tags||[]).forEach(t=>{ const el=document.createElement('span'); el.className='tag'; el.textContent=t; tagsList.appendChild(el); }) }

    function formatDate(ts){ try{ const d = new Date(ts); return d.toLocaleString(); }catch(e){return '-'} }

    // export/import
    function exportAll(){
      const data = JSON.stringify(notes, null, 2);
      const blob = new Blob([data],{type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'notes-export-'+(new Date().toISOString().slice(0,10))+'.json';
      document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    }

    function exportCurrent(){
      if(!currentId) return alert('No note selected');
      const n = notes.find(x=>x.id===currentId);
      const data = JSON.stringify(n, null, 2);
      const blob = new Blob([data],{type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = (n.title||'note') + '.json';
      document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    }

    function importFile(file){
      const reader = new FileReader();
      reader.onload = e => {
        try{
          const data = JSON.parse(e.target.result);
          if(Array.isArray(data)){
            // merge, prefer imported notes on top
            notes = data.concat(notes);
            saveAll();
            alert('Imported ' + data.length + ' notes.');
          } else if(data && data.id){
            notes.unshift(data);
            saveAll();
            alert('Imported 1 note.');
          } else {
            alert('Unknown JSON structure. Expect an array of notes or a single note object.');
          }
        }catch(err){ alert('Failed to parse JSON: ' + err.message) }
      }
      reader.readAsText(file);
    }

    // utilities
    function escapeHtml(s){ return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

    // events
    document.addEventListener('DOMContentLoaded', ()=>{
      load();

      $('newBtn').addEventListener('click', ()=> newNote());
      $('saveBtn').addEventListener('click', ()=> saveCurrent());
      $('deleteBtn').addEventListener('click', ()=> deleteCurrent());
      $('exportBtn').addEventListener('click', ()=> exportAll());
      $('downloadNoteBtn').addEventListener('click', ()=> exportCurrent());
      $('clearAllBtn').addEventListener('click', ()=> {
        if(!confirm('Clear all notes from storage? This cannot be undone.')) return;
        notes = []; saveAll(); clearEditor();
      });

      $('searchInput').addEventListener('input', e=> renderList(e.target.value));

      tagsInput.addEventListener('change', ()=> renderTags(parseTags(tagsInput.value)));

      $('importFile').addEventListener('change', e=>{ const f = e.target.files[0]; if(f) importFile(f); e.target.value=''; });

      // autosave when typing (debounced)
      let autosaveTimer = null;
      [titleInput, bodyInput, tagsInput].forEach(el=> el.addEventListener('input', ()=>{
        clearTimeout(autosaveTimer);
        autosaveTimer = setTimeout(()=>{ try{ saveCurrent(); }catch(e){} }, 800);
      }));

      // keyboard shortcuts
      window.addEventListener('keydown', e=>{
        const mod = e.ctrlKey || e.metaKey;
        if(mod && e.key.toLowerCase()==='s'){
          e.preventDefault(); saveCurrent();
        }
        if(mod && e.key.toLowerCase()==='n'){
          e.preventDefault(); newNote();
        }
      });

    });
  </script>
</body>
</html>
